{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\GitHub\\\\arif-react\\\\src\\\\Pages\\\\CreatePlaylist\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport '../../Assets/App.css';\nimport Music from '../../Components/Music';\nimport SearchBar from '../../Components/Search';\nimport React, { useState } from 'react';\nimport PlaylistForm from '../../Components/Playlist';\nimport { useSelector } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreatePlaylist() {\n  _s();\n\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [musicData, setMusicData] = useState([]);\n  const [selectedMusic, setSelectedMusic] = useState([]);\n  const {\n    token\n  } = useSelector(state => state.userToken);\n\n  const handleInput = e => {\n    setSearchKey(e.target.value);\n  };\n\n  const handleSearch = async e => {\n    e.preventDefault();\n    const url = \"https://api.spotify.com/v1/search\";\n    const keywords = searchKey;\n    const type = \"track\";\n    console.log(token);\n\n    try {\n      const response = await fetch(`${url}?q=${keywords}&type=${type}&limit=10`, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n\n      if (!response.ok) {\n        switch (response.status) {\n          case 401:\n            throw new Error(`Unauthorized access, please login first`);\n\n          case 403:\n            throw new Error(`Forbidden access`);\n\n          default:\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n      } else {\n        const musicData = await response.json();\n        setMusicData(musicData.tracks.items);\n      }\n    } catch (error) {\n      alert(`There has been a problem with your fetch operation: ${error.message}`);\n    }\n  };\n\n  const selectMusic = data => {\n    const tempArrMusicId = [...selectedMusic, data.uri];\n    setSelectedMusic(tempArrMusicId);\n  };\n\n  const deselectMusic = data => {\n    const index = selectedMusic.indexOf(data.uri);\n    const tempArrMusicId = selectedMusic.concat([]);\n    tempArrMusicId.splice(index, 1);\n    setSelectedMusic(tempArrMusicId);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [token === \"\" ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 26\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Berhasil Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 47\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Buat Playlist Kamu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlaylistForm, {\n      selectedMusic: selectedMusic\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Cari dan Pilih Track Musik\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n      handleInput: handleInput,\n      handleSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"musics-wrapper\",\n      children: [musicData.filter(music => {\n        return selectedMusic.includes(music.uri);\n      }).map(music => {\n        return /*#__PURE__*/_jsxDEV(Music, {\n          data: music,\n          select: selectMusic,\n          deselect: deselectMusic,\n          isSelected: true\n        }, music.uri, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 20\n        }, this);\n      }), musicData.filter(music => {\n        return !selectedMusic.includes(music.uri);\n      }).map(music => {\n        return /*#__PURE__*/_jsxDEV(Music, {\n          data: music,\n          select: selectMusic,\n          deselect: deselectMusic,\n          isSelected: false\n        }, music.uri, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 20\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreatePlaylist, \"TAv2/Za2enxQ07zbLUwy26qMm14=\", false, function () {\n  return [useSelector];\n});\n\n_c = CreatePlaylist;\nexport default CreatePlaylist;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePlaylist\");","map":{"version":3,"sources":["C:/Users/ASUS/Documents/GitHub/arif-react/src/Pages/CreatePlaylist/index.js"],"names":["Music","SearchBar","React","useState","PlaylistForm","useSelector","Redirect","CreatePlaylist","searchKey","setSearchKey","musicData","setMusicData","selectedMusic","setSelectedMusic","token","state","userToken","handleInput","e","target","value","handleSearch","preventDefault","url","keywords","type","console","log","response","fetch","headers","ok","status","Error","json","tracks","items","error","alert","message","selectMusic","data","tempArrMusicId","uri","deselectMusic","index","indexOf","concat","splice","filter","music","includes","map"],"mappings":"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","sourcesContent":["import '../../Assets/App.css';\r\nimport Music from '../../Components/Music';\r\nimport SearchBar from '../../Components/Search';\r\nimport React, { useState } from 'react';\r\nimport PlaylistForm from '../../Components/Playlist';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nfunction CreatePlaylist() {\r\n\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [musicData, setMusicData] = useState([]);\r\n  const [selectedMusic, setSelectedMusic] = useState([]);\r\n  const { token } = useSelector((state) => state.userToken);\r\n\r\n  const handleInput = (e) => {\r\n    setSearchKey(e.target.value);\r\n  };\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    const url = \"https://api.spotify.com/v1/search\";\r\n    const keywords = searchKey;\r\n    const type = \"track\";\r\n    console.log(token);\r\n    try {\r\n      const response = await fetch(`${url}?q=${keywords}&type=${type}&limit=10`, {\r\n        headers: {\r\n          'Authorization' : 'Bearer ' + token\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        switch (response.status) {\r\n          case 401:\r\n            throw new Error(`Unauthorized access, please login first`);\r\n          case 403:\r\n            throw new Error(`Forbidden access`);\r\n          default:\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n      } else {\r\n        const musicData = await response.json()\r\n        setMusicData(musicData.tracks.items);\r\n      }\r\n    } catch (error) {\r\n      alert(`There has been a problem with your fetch operation: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  \r\n  const selectMusic = (data) => {\r\n    const tempArrMusicId = [...selectedMusic, data.uri];\r\n    setSelectedMusic(tempArrMusicId);\r\n  };\r\n\r\n  const deselectMusic = (data) => {\r\n    const index = selectedMusic.indexOf(data.uri);\r\n\r\n    const tempArrMusicId = selectedMusic.concat([]);\r\n    tempArrMusicId.splice(index, 1);\r\n    setSelectedMusic(tempArrMusicId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {\r\n          token === \"\" ? <Redirect to=\"/\"/> : <p>Berhasil Login</p> \r\n      }\r\n      <h1>Buat Playlist Kamu</h1>\r\n\r\n      <PlaylistForm selectedMusic={selectedMusic} />\r\n\r\n      <h3>Cari dan Pilih Track Musik</h3>\r\n\r\n      <SearchBar handleInput={handleInput} handleSearch={handleSearch}/>\r\n\r\n      <div className='musics-wrapper'>\r\n        {\r\n          musicData\r\n          .filter((music) => {\r\n            return selectedMusic.includes(music.uri);\r\n          })\r\n          .map((music) => {\r\n            return <Music key={music.uri} data={music} select={selectMusic} deselect={deselectMusic} isSelected={true}/>\r\n          })\r\n        }\r\n        {\r\n          musicData\r\n          .filter((music) => {\r\n            return !selectedMusic.includes(music.uri);\r\n          })\r\n          .map((music) => {\r\n            return <Music key={music.uri} data={music} select={selectMusic} deselect={deselectMusic} isSelected={false}/>\r\n          })\r\n        }\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreatePlaylist;"]},"metadata":{},"sourceType":"module"}